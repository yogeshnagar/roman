name: Get Selected Environments
id: get-envs-action
description: Get Selected Environments
icon: "check"
color: "black"
on:
  workflow-call:
inputs:
  data:
    description: inputs for check input
    required: true
runs:
  using: "composite"
  steps:
    - name: Parse input
      id: parse-input
      shell: bash
      run: |
        inputs=($INPUTS)
        
        declare -A myarray
        while IFS="=" read -r key value
        do
          myarray[$key]="$value"
        done < <(jq -r 'to_entries|map("(.key)=(.value)")|.[]' file)
        
        declare -A jsonInput=${{ fromJSON(inputs.data) }}
                
        declare -A inputsMap
        declare -i count=0
        for i in ${jsonInput[@]}; do
          if ! [[ ${jsonInput[i]} ]] ; then
            echo "$i"
            inputsMap["$count"]=jsonInput["$i"]
            count=$((count+1))
          fi
        done
                
        echo "${{join(env.inputsMap, ',')}}" >> "$GITHUB_OUTPUT"
      env:
        INPUTS: ${{ inputs.data }}